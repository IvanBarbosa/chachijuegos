# -*- coding: utf-8 -*-

from bs4 import BeautifulSoup
import requests
import os
import json


def extraerDatos():  
    mensaje = {}  
    for i in range(0,3):
        url = "http://www.3djuegos.com/"
        req = requests.get(url)
        statusCode = req.status_code

        if statusCode == 200:
            html = BeautifulSoup(req.text, 'html.parser')
            entradas = html.find_all('div',{'class':'desta_main'})

            for i,entrada in enumerate(entradas):
                titulo = entrada.find('p', {'class' : 'pad_r8'}).getText()
                imagen = entrada.find('img')
                imagen = format(imagen['src'])
                mensaje[i]=({'titulo': titulo.encode("utf-8"), 'imagen':imagen})
        else:
            break
    return mensaje


def extraerContenido(url):  
    mensaje = {}  
    req = requests.get(url)
    statusCode = req.status_code

    if statusCode == 200:
        html = BeautifulSoup(req.text, 'html.parser')
	video = html.find('meta',{'itemprop':'contentURL'})
        entradas = html.find_all('p',{'class':'s16 fftext c2 lh27 img100 a_n mar_rl2'})
    if video!=None:
    	video=format(video['content'])
    texto_final=""
    for i,entrada in enumerate(entradas):
        texto = entrada.getText()
	texto_final+=texto
    mensaje=({'texto': texto_final.encode("utf-8"),'video':video})
    return mensaje
